<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Druzi: Введение в программирование</title>
        <link rel="stylesheet" type="text/css" href="common.css">
        <link rel="icon" type="image/x-icon" href="favicon.png">
        <style>
ol {
    counter-reset: item
}
li {
    display: block
}
li:before {
    content: counters(item, ".")" ";
    counter-increment: item
}
#content {
    position: relative;
}
    #content img {
        position: absolute;
        top: 0px;
        right: 0px;
    }

        </style>

    </head>
    <body>
        <div class="content">
            <h2>Основы вычислительной техники</h2>
            <p>
            <a href=index.html>Назад</a>
            </p>
        </div>
        <div class="content">
            <h3>Интернациональные настройки</h3>
            <p>
            Для того чтобы иметь возможность показывать кириллические шрифты
            в DOSBox и при этом иметь возможность набирать с немецкой
            клавиатуры, необходимо выполнить следующие шаги:
            <ol>
                <li>Скачать драйвер шрифтов <a href=KEYRUS.COM>keyrus</a>
                    в папку с файлами DOSBox, скорее всего в
                    <code>C:\dosbox</code></li>
                <li>Отредактировать конфигурационный файл DOSBox, добавить в
                    самый конец следующее заклинание:
<pre>Z:\KEYB DE
KEYRUS /KEYBOARD=OFF
</pre></li>
            </ol>
            </p>
            <p>
            Полная документация к драйверу шрифтов находится здесь:
            </p>
<pre>
              Драйвер дисплея и клавиатуры KEYRUS v8.0beta16
              ----------------------------------------------
                         Руководство пользователя
                         ------------------------

        Пакет программ KEYRUS предназначен для русификации клавиатуры  и
дисплея IBM совместимого  персонального компьютера. Принтер  данная про-
грамма не  русифицирует. Путем  небольшой подстроки,  как будет показано
ниже драйвер мождо заставить поддерживать  не только русский язык, но  и
любой другой.

        Программа состоит из трех блоков - клавиатуры, поддержки дисплея
и блока  интерфейса. Первый  блок обрабатывает  клавиатуру, второй  блок
обеспечивает корректное отображение символов на дисплее, третий выполня-
ет второстепенные функции (интерфейс с программами пользователя, динами-
ческое изменение параметров и др.)
        Прежде всего, во избежание недоразумений, определимся - на каких
компьютерах работает эта программа.
        Блоки клавиатуры и интерфейса нечувствительны к типу  компьютера
        Блок поддержки дисплея полноценно работает только на EGA/VGA, на
MCGA, Hercules+,  ЕС-1840 поддержка,  в принципе  возможна, но  в данной
версии не реализована (автор не  имеет доступа к таковым). На  CGA, MDA,
обычный Hercules поддержка символов теоретически невозможна.  Необходимо
прошивать аппаратно знакогенератор.

        KEYRUS был первоначально  задуман как драйвер-русификатор,  но в
текущей версии его можно настроить на любую клавиатуру пользователя и на
любой национальный  шрифт (при  условии, что  символов в  этом языке  не
больше 256).
        Программа легко настраивается  на любой, даже  самый прихотливый
вкус пользователя. Текущая версия  поддерживает более 50 различных  клю-
чей, с помощью которых можно составить бесчисленное множество  вариантов
конфигурации на любой вкус.  В зависимости от конфигурации драйвер зани-
мает от 300 байт до 15 килобайт.

------------------------------------------------------------------------
     Вы  можете  высказать  свои  пожелания  (особенно  интересует  меня
информация о замеченных ошибках) автору программы по следующим каналам:

              Гуртяк Дмитрий Александрович
     адрес  : Украина 340048 г.Донецк ул.Артема 147"г" кв. 23
     телефон: (0622) 55-78-52
     FIDO   : 2:465/41
     Email  : Gurtjak@is1.ints.donetsk.ua


                       ОПИСАНИЕ РАБОТЫ С ДРАЙВЕРОМ
                       ---------------------------

        Запуск: KEYRUS <список ключей>

        С помощью различных ключей можно определить многочисленные пара-
метры драйвера.
        Если запустить KEYRUS /HELP или KEYRUS /HELP:RUS, то вы  увидите
краткое описание всех ключей драйвера на английском или русском языках.

        При запуске KEYRUS /? вы увидите примерно следующее:

KEYRUS v8.0_beta16 (c) 1989-1994 by Dmitry Gurtjak (17-Jan-94)
Current options for KEYRUS :

/RUSSIAN /COMPRESS=ON
/8X8=ON /8X14=AUTO /8X16=AUTO /8XN=19,AUTO /8VGA=OFF /LAPTOP=OFF
/SCAN=54,0 /LAT=OFF,0 /ALT=56p,0 /RUSALT=OFF /MODESHIFT=OFF,RUS /CLRSCAN=ON
/KEYBOARD=ON /BASE_KEYS=OFF /FAST=ON,0,0 /BUFFER=OFF
/SWITCH=OFF /BLANK=OFF,2,ON,OFF
/INTERFACE=ON
/COLOR=1,10 /BEEP=OFF,RUS /CLICK=OFF,RUS /LAMP=OFF,RUS

        Это текущее  состояние всех  параметров драйвера.  Эти параметры
описаны подробно ниже. Чтобы изменить любой параметр надо запустить
        KEYRUS <изменямые параметры> /SAVE, например
        KEYRUS /BEEP /BLANK=ON,4 /SAVE
        После этого запуск с ключем /? покажет ваши изменения.

        Если список  параметров получается  очень длинным,  то можно эти
параметры написать  в текстовом  файле, затем  если указать  в командной
строке @имя_файла, то KEYRUS прочитает эти параметры.

        Рекомендуется при изменении конфигурации сделать следующее.
        1. Если собираетесь  менять фонты/раскладки клавиатур,  то лучше
запустить KEYRUS /FILES и сохранить полученные файлы фонтов и  раскладки
клавиатуры.
        2. Запустить KEYRUS /? > Файл
        3. Любым текстовым редактором отредактировать этот файл и внести
все необходимые изменения.
        4. Запустить KEYRUS @Файл /SAVE

        Если указать ключи,  изменяющие праметры без  /SAVE в конце,  то
драйвер будет запущен  с этими параметрами  только в данный  момент и не
будет помнить эти изменения при следующих запусках.

        Если в  качестве параметров  требуется указать  число, его можно
указать в десятичной форме (по умолчанию) или шестнадцатиричной. Для 16-
чного представления числа нужно перед числом поставить символ "$".
        Hапример $20 ( =32 ).


         ПОЛНОЕ ОПИСАНИЕ КЛЮЧЕЙ ПРОГРАММЫ KEYRUS v8.0beta16
         --------------------------------------------------

        -----------------------------------
        Раздел 1. Основные блоки программы.
        -----------------------------------

        Программа KEYRUS состоит из множества блоков - подпрограмм,  ко-
торые при установке в память очень компактно собираются. При сборке  ос-
таются только необходимые подпрограммы.
        Несмотря на большое число всех возможных подпрограмм, их можно
выделить в три основные группы:
        Блок клавиатуры
        Блок поддержки дисплея
        Блок интерфейса

        Блок  клавиатуры  обеспечивает  работу  русской и альтернативной
клавиатуры и все связанные с этим функции.
        Блок поддержки дисплея обеспечивает корректное отображение  рус-
ких символов на экране дисплея.
        Блок интерфейса - самый маленький из всех. Он обеспечивает  воз-
можность динамически менять некоторые параметры драйвера, также он  поз-
воляет пользователю управлять драйвером из своей программы.
        Все блоки можно включать или выключать при установке драйвера  в
память с помощью следующих ключей.

   /KEYBOARD=Off|On
   ----------------                Установка блока поддержки клавиатуры.

        Пример: KEYRUS  /keyboard=off запускает  драйвер в  конфигурации
без поддержки клавиатуры. Это может быть необходимым, если вы для клави-
атуры используете другой драйвер.


   /ROM
   ----                                Отключить блок поддержки дисплея.

        Может  понадобиться   в  том   случае, когда шрифт вашего  языка
уже зашит в BIOS вашего  компьютера или если вы для  дисплея используете
другой драйвер. Чтобы включить блок поддержки дисплея, используйте любую
опцию из следующего списка (их описание дальше)
        /range, /russian, /128, /all, /full


   /INTERFACE=Off|On
   -----------------                         Установка блока интерфейса.

        Отключение этого блока может сэкономить около 150 байт, но тогда
вы не сможете программно управлять драйвером или менять параметры  прго-
раммы динамически, без перезагрузки компрьютера.


        --------------------------------------------------
        Раздел 2. Блок клавиатуры. Переключатели клавиатур
        --------------------------------------------------

        Далее перечисленны параметры, определяющие - какие клавиши будут
использоваться для переключения режимов клавиатур.
        Для этих ключей используются следующие обозначения:
        <scancode> - код клавиши. Таблица всех кодов есть в  приложении,
также ее можно увидеть в любой момент запустив KEYRUS /KEY?
        <shift>    - клавиша смещения.
                      1 : Нажат правый Shift
                      2 : Нажат левый Shift
                      4 : Нажата клавиша Ctrl
                      8 : Нажата клавиша Alt
можно указывать  комбинации для  <shift>, например  11 (=8+2+1) означает
одновременное нажатие Alt+L.Shift+R.Shift


        /SCAN=<scancode>[,<shift>]
        --------------------------           Установить клавишу для 1-й
                                                   клавиатуры (русской).

        Примеры: KEYRYS /scan=29p  определяет клавишу Right Ctrl
                 KEYRUS /scan=29   определяет клавишу Left Ctrl
                 KEYRUS /scan=56p  определяет клавишу Right Alt
                 KEYRUS /scan=54,2 определяет комбинацию L.Shift+R.Shift


        /LAT=OFF|<scancode>[,<shift>]
        -----------------------------   Установить клавишу для латинской
                                                             клавиатуры.

        Если указан ключ /LAT=off  это означает, что для  переключения в
латинский режим используется  та же клавиша,  что и для  переключения на
русскую клавиатуру.

        Примеры: KEYRUS /scan=54 /lat=42
                 ;Рус - Right Shift, Лат - Left Shift
                 KEYRUS /scan=29e /lat=29
                 ;Рус - Right Ctrl, Лат - Left Ctrl
                 KEYRUS /scan=54 /lat=off или KEYRUS /scan=54 /lat=54
                 ;Рус/Лат - Right Shift


        /ALT=OFF|<scancode>[,<shift>]
        -----------------------------                 Установить клавишу
                                          для дополнительной клавиатуры.

        Если указан ключ /ALT=off то дополнительная клавиатура не подде-
рживается и драйвер занимает  меньше  памяти.
        В качестве альтернативной клавиатуры могут использованы варианты
с раскладкой псевдографики  или украинская клавиатура.
(смотри ключ /keys и описание программы krfont)

        Пример: KEYRUS /scan=54 /alt=54 /lat=54
                                           ; все клавиши на right shift


        /MODESHIFT=OFF|<scancode>[,<mode>]
        ----------------------------------           Установить клавишу
                                для временного перехода в режим <mode>.

        Под режимом <mode> здесь подразумевается RUS, LAT или ALT.
        Если такая клавиша определена, то  если ее нажать у не  отпуская
нажимать буквенные клавиши, то одни будут работать в указанном режиме.
        Пример: KEYRUS /MODESHIFT=29p,RUS
        ; Если нажимать  символы, удерживая R.Ctrl,  то они будут  нажи-
маться как русские, если до этого был латинский режим, и наоборот - если
был русский режим, то клавиши будут работать как латинские до отпускания
R.Ctrl.



        -----------------------------------------------
        Раздел 3. Блок клавиатуры. Индикация клавиатур.
        -----------------------------------------------

        В этот раздел входят  ключи, позволяющие выбрать пользователю  -
каким образом он будет знать, в каком  режиме клавиатуры находится драй-
вер.
        Можно отображать  это цветом  рамки, потрескиванием  клавиатуры,
лампочкой на клавиатуре.  Можно отключить все   возможности, а  можно и
включить все сразу.


        /COLOR=<col>[,<altcol>]
        -----------------------                Отображение цветом рамки.

        <col>  - цвет рамки в русском режиме,
        <altcol> - цвет рамки в альтернативном режиме.
        Цвет - число в  пределах от 0 до 63 на EGA, до 15 на CGA, до 255
на VGA.
        На монохромных адаптерах рамка не отображается.
        Этот параметр можно менять динамически.

        KEYRUS /color=0,0 указывает на то, что рамка не будет  использо-
ваться и драйвер будет занимать меньше памяти.


        /BEEP=Off|On [,<mode>]
        ----------------------             Если этот режим включен (On),
то  при переключении  режимов  клавиатуры будет раздаваться звуковой си-
гнал различной  частоты.

        <mode> указывает на то,  для какой клавиатуры будет  использован
звук более высокой частоты, возможны  3 значения: RUS, LAT, ALT  - соот-
ветственно для  русской, латинской и альтернативной клавиатур.

        Примеры: KEYRUS /beep=on,alt  - высокий сигнал  при переключении
                                        на альтернативную клавиатуру.
        В процессе работы можно только отключить этот параметр /beep=off


        /CLICK=Off|On[,<mode>]
        ----------------------            Если этот  режим включен (On),
то при работе   в  режиме клавиатуры   <mode> (возможные значения   RUS,
LAT, ALT) клавиши будут потрескивать.
        Примечание: Если запустить  KEYRUS /click=on,lat то  в латинском
режиме клавиши могут  не трещать. Причина в том, что для латинской  кла-
виатуры  необходимо  указывать  еще  ключ /base_keys=on (см. дальше).
Т.е. для корректной работы потрескивания в латинском режиме нужно:
        KEYRUS /click=on,lat /base_keys
        Для остальных режимов это не важно.
        Пример: KEYRUS /click=on,rus
        В  процессе   работы  можно   только  отключить   этот  параметр
(KEYRUS /click=off).


   /LAMP=Off|On [,<mode>]
   ----------------------                  Если этот режим включен (On),
то при работе в режиме  клавиатуры <mode> (возможные значения RUS,  LAT,
ALT) будет гореть лампочка ScrollLock на клавиатуре. Этот ключ работает
корректно только на AT.
        Побочный эффект: если  при  включенной  лампочке ScrollLock  на-
жать клавишу ScrollLock, CapsLock или NumLock, то лампочка может  погас-
нуть. В  этом  случае   выключите и включите русский (вернее  выбранный)
режим - лампочка восстановится.
        В процессе работы можно только отключить этот параметр /lamp=off


        ------------------------------------------------
        Раздел 4. Блок клавиатуры. Дополнительные ключи.
        ------------------------------------------------


        /CLRSCAN[=Off|On]
        -----------------                признак обнуления скэнкодов при
                                                          перекодировке.

        По умолчанию  этот параметр  разрешен (on).  Hекоторые текстовые
редакторы или другие программы  могут некорректно из-за этого  работать,
тогда надо этот параметр запретить (off).


        /RUSALT=OFF|ON
        --------------                  Знаки препинания в руском режиме

        Если =ON, то  в русском режиме  клавиатуры можно набирать  знаки
препинания с помощью  Alt  клавиши.  Для  этой  цели  зарезервировано  7
клавиш в правой части клавиатуры - "." "." "/" ";" "'" "[" "]", если на-
жимать их  вместе с Alt, то эти клавиши будут обрабатываться по  альтер-
нативной клавиатуре.
        Естественно, что  в режиме  заглавных букв  будут вырабытываться
символы "<" ">" "?"  ":" """ "{" "}".  Если у вас какая-либо  программа
использует  эти  7  клавиш  для  Alt  ввода, можно выключить этот  режим
(/RUSALT=OFF).
        Этот параметр нельзя изменять динамически.


        /SWITCH=Off|On
               =<scancode>[,<shift>]
        ----------------------------       Этот ключ определяет клавишу,
нажатием которой можно переключаться между символами драйвера (русскими)
и символами, которые "зашиты" в ПЗУ.
        KEYRUS /switch=off отключает эту возможность и позволяет   сэко-
номить немного  памяти.
        Если  клавиша  не  определена, подразумевается Alt+Tab
        (KEYRUS /switch=15,8)
        <scancode> - Скэн код клавиши (см. приложение)
                     Внимание! нельзя указывать коды с расширением "p"
        <shift>    - код клавиши смещения
        возможные значения:
			1 : Нажат правый Shift
			2 : Нажат левый Shift
			4 : Нажата клавиша Ctrl
			8 : Нажата клавиша Alt
		 Допустимы  любые комбинации  этих чисел.  Например если
		 указать 12 (12=8+4), то надо будет одновременно  нажать
		 Ctrl и Alt.
    Пример:
    KEYRUS /switch=87,12       - Надо нажать Ctrl+Alt+F11
    Этот ключ можно динамически переопределять.


        /BASE_KEYS[=Off]
        ----------------                Поддержка английской клавиатуры.

        Этот ключ расширяет клавиатуру пользователя на английский режим.
Таким образом можно переопределить клавиши на нестандартные, или  наобо-
рот - стандартные на нестандартной клавиатуре. Обычно /base_keys=off.
        Необходимо указывать этот  ключ, если вы  пользуетесь параметром
/click=on,lat
        Этот ключ нельзя динамически переопределять.


        /KEYS=<file>
        ------------                       Загрузить файл с клавиатурой.

        Вы можете задать расположение клавиш, отличное от стандартного.
Размер файла - 318 или 212 байт.
        Этот файл создается с помощью программы KRKEYB, входящей в  ком-
плект поставки.
        Этот ключ нельзя динамически переопределять.
        Заготовку для своей клавиатуры можно также получить, запустив
KEYRUS /FILES


        /FAST[=<rate>[,delay]]
        ----------------------        Задать скорость работы клавиатуры.

        Hа AT сбрасывает лампочку NumLock и устанавливает скоростные па-
раметры на клавиатуре.  По умолчанию  =0,0 что означает задержка 1/4 се-
кунды и скорость 30 символов/секунду.
        Задержка может быть то 0 до 3 (0.25 с, 0.50 с., 0.75с., 1.0 с)
        Скорость может быть от 0 до 31
         0 = 30 с/сек       10 = 10
         1 = 26.7           13 = 9.2
         2 = 24             16 = 7.5
         4 = 20             20 = 5.0
         8 = 15             31 = 2.0
        Операционная система при старте устанавливает значения 10  сим/с
и задержку 1/2 сек.
        Отключить эту возможность можно KEYRUS /FAST=OFF
        Этот параметр можно изменять динамически.


        /BUFFER[=ON|Off]
        ----------------            Определяет большой буфер клавиатуры.

        Устанавливает буфер клавиатуры размером в 31 символ вместо обыч-
ных 15. Hа компьютерах 386 и выше не рекомендуется использовать эту воз-
можность, возможны подвисания.


        /BLANK=Off|On[,time[,mouse[,output]]]
        -------------------------------------            Гашение экрана.

        Этот ключ позволяет гасить экран по истечении определенного вре-
мени если не было нажатий на клавиши, движений мыши или вывода на экран.
        Имеет 4 параметра:
        1. Off или On - включать в драйвер блок гашения экрана или нет.
Это отнимет около 150 байт памяти, но сохранит экран вашего монитора.
        2. Time - время в  минутах. Если на протяжении этого  времени не
было активности пользователя, то экран погаснет.
        3. Mouse - может иметь значения ON или OFF. Указывает -  присое-
динять блок слежения  за мышью или  нет? Если этого  блока не будет,  вы
сэкономите немного  памяти, но на мышь драйвер не будет обращать  внима-
ния. Для нормальной работы надо запустить драйвер мыши до KEYRUS'а, ина-
че  блок слежения не будет инсталлирован.
        4. Output - может иметь значение  ON или OFF. Если =ON, то  если
какая нибудь программа попытается что-нибудь вывести на погашенный экран
(через Int10), то изображение на экране восстановится.

        Примечание. Экран не будет гаснуть в графических режимах.
        В процессе работы можно только отключить этот параметр /blank=off


                    ---------------------------------
                    Раздел 5. Блок поддержки дисплея.
                    ---------------------------------


        /8x8=Off|On|Auto
        ----------------                                        Фонт 8x8

        Указывает - использовать фонт 8x8 или нет.
        Например, если вы  обычно не работаете  в режиме 80x50(80x43)  и
вам не нужны  русские буквы в графике, вы  можете указать опцию /8x8=off
и тогда сэкономите 1К памяти. Если фонт отключен, символы не будут  под-
держиваться в режимах, которые используют матрицу 8x8.
        Значение параметра Auto означает,  что если при старте  драйвера
экран находился в  режиме с фонтом  8x8, то поддержка  этого фонта будет
включена, в противном случае - выключена.


        /8x14=Off|On|Auto
        -----------------                                      Фонт 8x14

        Указывает - использовать фонт 8x14 или нет.
        На VGA обычно в нем нет необходимости, но и там он может   пона-
добиться  для    некоторых  графических  режимов  (например, в редакторе
MSWORD). Компромиссным вариантом является вариант /8x14=auto
        В этом случае фонт 8x14 будет включен только в том случае,  если
в момент загрузки драйвера  используются символы 8x14. Если  фонт отклю-
чен,  символы не будут поддерживаться в режимах, которые используют мат-
рицу 8x14.


        /8x16=Off|On|Auto
        -----------------                                      Фонт 8x16

        Указывает - использовать фонт 8x16 или нет. Работает полностью
аналогично  ключу   /8x14.  На   EGA  состояние   /8x16=on  эквивалентно
/8x16=auto (но не на VGA).



        /8xN=<size>,Off|On|Auto
        -----------------------                                 Фонт 8xN

        Указывать - использовать  ли инсталлированный нестандартный фонт
размера 8xN. Работает аналогично /8x14. В текущую версию KEYRUS  инстал-
лирован фонт 8x19, который используется на многих LAPTOP.
        Инсталляция/деинсталляция фонтов осущесвляется ключами /newfont,
/deletefont (см. далее)



        /FULL
        -----                                   Полная поддержка экрана.

        Этот ключ является макрокомандой. То же  самое, что указать:
        KEYRUS /8x8=on /8x14=on /8x16=on /all
        В этом режиме осуществляется полная поддержка всех стандартных и
нестандартных текстовых и графических видеорежимов.


        /ALL
        ----                                                Все символы.

        Указывает на то, что загружать все символы, от символа с кодом 0
до  255. В этом режиме поддерживаются символы во всех графических  режи-
мах, которые используют те фонты, которые указаны опциями /8x8,  /8x16,
/8x14, /8xN.  Эта  опция устанавливает /compress=off


        /128
        ----                                     Последние 128 символов.

        Указывает на то, что надо загружать только верхние 128  символов
ASCII от 128 до 255.  При этом символы будут поддерживаться  в текстовых
режимах и графических режимах CGA (если разрешен фонт 8x8).
        Для  CGA  эта опция  указывает, что KEYRUS работает эквивалентно
программе GraphTabl из MSDOS.  Этот ключ устанавливает /compress=off.


        /RANGE=<st1>-<en1>,<st2>-<en2>
        ------------------------------    Cимволы в указанном диапазоне.

        Указывает на то, что надо загружать только символы из 2-х проме-
жутков.  При  этом символы поддерживаются  только в символьных  режимах.
Все параметры обязательны.
        Например: KEYRUS /128-175,224-239 означает,  что вы не использу-
ете  букв "Ё", "ё", "Є", "є", "Ї", "ї"


        /RUSSIAN
        --------                                 Только русские символы.

        Этот ключ является макрокомандой. То же самое, что указать:
        KEYRUS /range=128-175,224-245 /compress=on
        Т.е. грузить только русские и украинские символы:
        "А"-"п","р"-"я","Ёё", "Єє", "Її".
        Смотри  подробнее  ключи   /range, /compress.


        /COMPRESS=Off|On
        ----------------                                  Сжатие фонтов.

        Этот ключ переключает между двумя алгоритмами загрузки символов.
        Первый  (/compress=off)  использует  загрузку  шрифта, используя
BIOS.
        Второй (/compress=on) алгоритм хранит  в памяти шрифты в  упако-
ванной форме и KEYRUS занимает намного меньше памяти. При этом в  графи-
ческих режимах символы вообще не поддерживаются.
        Этот ключ  автоматически выставляется  =ON в  режиме /russian  и
сбрасывается в =OFF в режимах /all, /128 для поддержки графики. Поэтому,
если надо изменить  значение этого параметра,  его надо указывать  после
/russian, /all, /128.


        /FONT=<file>
        ------------             Загружает файл со шрифтом пользователя.

        В комплект поставки входит утилита KRFONT. С ее помощью вы може-
те нарисовать  свой экранный  шрифт и  записать ее  в какой  нибудь файл
<file>.
        Если после этого запустить KEYRUS /font=<file> /SAVE (где <file>
- имя вашего файла), то  после перезагрузки драйвера он будет  поддержи-
вать ваши шрифт или шрифты.
        С помощью этой команды вы можете изменить любой шрифт в драйвере
из 8x8, 8x14, 8x16 или любой нестандартный, как например 8x19.
        Заготовки для своих фонтов можно "вытащить" из KEYRUS с  помощью
ключа /FILES.
        Часто ко мне обращаются с  такой проблемой - есть русский  драй-
вер, в котором человеку очень нравится  шрифт и из-за этого он не  хочет
пользоваться KEYRUS. Есть очень простой способ настроить KEYRUS на шрифт
этого русификатора.
        1. Убедитесь что ваш русский драйвер загружен и тот шрифт, кото-
рый вам нравится присутсвует в данный момент на экране.
        2. Запустите  программу KRFONT  (без параметров).  Эта программа
должна считать шрифт с экрана.
        3. Скажите Save Font (в какой нибудь файл <file>).
        4. Выйдите из KRFONT
        5. Запустите KEYRUS /font=<file> /save
        И  все.  После  этого  вы  можете вставить в autoexec.bat запуск
KERYUS вместо вашего старого драйвера.

        Фонт на экране можно менять не перезагружая драйвер, при условии
что при закрузке был отключен параметр /COMPRESS.



        /LAPTOP[=ON|OFF]
        ----------------        Поддержка Laptop и Notebook компьютеров.

        Если на вашем лэптопе русские символы отображаются  некорректно,
например иногда отображаются, а  иногда вместо них "греческие  символы",
то попробуйте установить этот параметр в ON, это должно решить ваши про-
блемы.


        /8VGA[=ON|OFF]
        --------------                Hа VGA символы шириной 8 пикселей.

        Если у вас VGA, то вы наверное замечали, что когда экран  запол-
нен чем-то типа "▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒", то между символами видны тонкие  вер-
тикальные полоски, хотя на EGA этого не происходит. Это вызвано тем, что
в текстовых режимах VGA символы имеют ширину 9, а не 8.
        Многих людей это по разным причинам не устраивает. В этой ситуа-
ции установите /8vga=on и KEYRUS всегда будет переключать экран в  режим
с символами шириной 8.


        /NEWFONT=<size>,<loadfun>,<graphfun>,<pointerfun>
        ------------------------------------------------- Инсталлировать
                                                                   фонт.

        Встречаются  SVGA  с  нестандарными  режимами, где символы имеют
размер 8x15, 8x17, чаще всего встречается 8x19.
        Естественно, что многие русификаторы не понимают таких  режимов.
С помощью этого ключа KEYRUS можно настроить на вашу SVGA.

        Первый параметр - это размер нестандартного фонта на вашей SVGA.
        Остальные 3 параметра будут описаны ниже.
        Все ключи после /newfont игнорируются.

        Для инсталляции нужно проделать следующие действия (пусть вы хо-
тите инсталлировать фонт 8x15).

        1. Запустите KEYRUS /NEWFONT=15,$FF,$FF,$FF
        2. Запустите программу KRFONT и нарисуйте шрифт 8x15 (проще все-
го для этого взять стандартный шрифт  8x16, изменить размер до 15 и  не-
много подредактировать).
        3. Запишите этот фонт в какой-нибудь файл (<file>).
        4. Запустите KEYRUS /FONT=<file> /SAVE
        5. Запустите KEYRUS /8xN=15,ON /SAVE
                 или KEYRUS /8xN=15,Auto /SAVE
           Первый случай  - если   вам  шрифт 8x15  нужен  постоянно, во
втором случе шрифт  8x15 будет подключаться,  если он использовался  при
загрузке драйвера.
        И все.

        Таким образом в KEYRUS  изначально был инсталлирован фонт  8x19,
который часто встречается на лэптопах.

        Три последних параметра  в этой команде  нужны для более  полной
поддержки этого фонта,  включая графику. Hо  чтобы их знать  нужно иметь
руководство программиста по вашей SVGA, в противном случае -  устанавли-
вайте эти параметры всегда в $FF.

        <loadfun> - функция BIOS загрузки фонта.
        Для того, чтобы загрузить нужный фонт программист должен вызвать
прерывание 10h с параметрами  (AH=11h, AL=номер функции).
        Здесь номер функции (для стандартных фонтов):
        2 - фонт 8x8
        1 - фонт 8x14
        4 - фонт 8x16
        Если вам известно, что на вашей SVGA искомый фонт использует но-
мер функции, к примеру 7,  то параметр <loadfun> нужно установить  в это
значение.

        <graphfun> - функция BIOS установки шрифта в графике.
        Для того,  чтобы в  графическом режиме  использовать нужный фонт
программист должен вызвать преывание 10h с параметрами (AH=11h, BL = код
числа строк (0 - пользовательский, тогда DL=числу строк; 1 - 14 строк на
экран, 2 - 25 строк на экран, 3 - 43 строки на экран), AL=номер функции)
        Здесь номер функции (для стандартных фонтов):
        $23 - фонт 8x8
        $22 - фонт 8x14
        $24 - фонт 8x16
        Если вам известно, что на вашей SVGA искомый фонт использует но-
мер функции, к  примеру $26, то  параметр <graphfun> нужно  установить в
это значение.

        <pointerfun> - BIOS функция, возвращающая адрес шрифта.
        Если вы хотите получить адрес в памяти фонта, который  использу-
ется на экране, программист должен вызвать прерывание 10h с  параметрами
(AX=1130h, BH= номер функции). Hа выходе будет получено: (ES:BP -  адрес
фонта, CX - размер фонта, DL - строк/на экране).
        Здесь номер функции (для стандартных фонтов):
        1 - фонт 8x8
        2 - фонт 8x14
        6 - фонт 8x16
        Если вам известно, что на вашей SVGA искомый фонт использует но-
мер функции, к  примеру 8, то  параметр <pointerfun> нужно  установить в
это значение.


        /DELETEFONT
        -----------             Удалить последний инсталлированный фонт.

        Эта команда удалит последний инсталлированный фонт. Если инстал-
лированных фонтов не останется, то будет удале фонт 8x19, затем 8x16.
        Поэтому будьте осторожны,  чтобы случайно не  испортить драйвер.
Лучше перед инсталлированием и/или удалением фонтов сохранить  резервную
копию драйвера, а также  запустить KEYRUS /FILES и  сохранить полученные
файлы.


                          ----------------------
                          Раздел 6. Прочие опции
                          ----------------------

        @Имя_файла                     Содержимое указанного  файла под-
        ----------                     ставляется в командную строку.

        Примечание: В качестве  заготовки для файла  удобно использовать
текст, полученный с помощью запуска KEYRUS /? >Имя_файла


        /FILES                         Создать файлы с фонтами и  матри-
        ------                         цей клавиатуры.

        Если в командной строке  указать этот ключ, то в текущей  дирек-
тории будут созданы файлы с матрицей клавиатуры (_keys.kbd) и файлы  ин-
сталлированных в драйвер фонтов (_08x08.fnt, _08x14.fnt, etc.). Эти фай-
лы  можно  отредактровать  программами  krkeyb  (раскладку клавиатуры) и
krfont (фонт) и затем замисать обратно в драйвер с помощью ключей  /keys
и /font.


        /?                             Показать конфигурацию, "зашитую"
        --                             в драйвер.

        См. также ключ /files.


        /EGA                           Указать на адаптер EGA.
        ----
        /VGA                           Указать на адаптер VGA.
        ----

        Иногда попадаются компьютеры с  адаптером EGA, на которых  тесты
утверждают что это не EGA. Если запустить драйвер на этом компьютере, то
процедура диагностики  сработает неправильно.  С помощью  ключей /ega  и
/vga явно указывается драйверу тип адаптера, при этом результат  автома-
тической диагностики будет игнорироваться.
        Эти параметры не запоминаются через /save
        Примечание: Если вы используюете  программу VIDRAM или OS  PCMOS
или другие программы,  которые переводят адаптер  в режим эмуляции  CGA,
нужно запускать keyrus /compress /vga (или /ega)


        /SAVE                          Сохранить конфигурацию драйвера.
        -----

        Все параметры,  которые указаны  перед ключем  /save станут  при
этом умалчиваемыми. Состояние всех умалчиваемых параметров можно  узнать
с помощью keyrus /?.


        /RELEASE                       Выгрузить драйвер из памяти.
        --------

        Это можно сделать только в том случае, если драйвер был загружен
с включенной опцией /interface


        /DELAY_INIT                    Отложенная загрузка.
        -----------

        Hа некоторых  компьютерах, в  основном с  процессором 386 иногда
может происходить "залипание" клавиш Ctrl, Alt, Shift - после отпускания
клавиши остается эффект "нажатой клавиши".
        В версии 8.0 драйвера реализован алгоритм, который сводит до ми-
нимума количество таких  ошибок.  Если же они возникают, то  стоит попы-
таться загрузить драйвер самым последним из резидентных программ - тогда
алгоритм будет работать на 100%.
        К сожалению иногда возникают ситуации, когда keyrus нет  возмож-
ности  загрузить  последним.  Для  обхода  этого  и  предусмотрен   ключ
/delay_init. При загрузке с этой опцией keyrus будет только установлен в
память, но не активирован. Для активирования нужно запустить keyrus  еще
раз,  без  всяких  параметров.  При  этом  должен  быть  установлен ключ
/interface.


        /ANYWAY                        Для загрузки второй копии драйве-
        -------                        ра в память.

        При запуске с этим ключем не будет проверяться - есть ли уже ко-
пия драйвера в памяти. Таким образом можно запустить 2 или больше  копий
keyrus в память (иногда это имеет смысл, например чтобы иметь не 3, а  5
раскладок клавиатур, или по какой-либо другой причине)


        /HELP[:RUS]                    Краткая инструкция.
        -----------

        /help выдаст инструкцию на английском языке, /help:rus - на рус-
ском.


        /KEY?                          Показать таблицу скэнкодов клави-
        -----                          атуры.


        /INT_HELP                      Показать информацию  о том, как
        ---------                      работать с  драйвером из  своей
                                       программы. (через int 16h)


                   --------------------------------
                   Раздел 7. Программный интерфейс.
                   --------------------------------

        Программный интерфейс доступен, если драйвер загружен с включен-
ной опцией /interface.
        При запуске драйвера с ключем /int_help будет показана приведен-
ная ниже информация.

        ═════════╤════════════════════════════════════════
         subfun. │        INT 16H ah=41h
        ─────────┼────────────────────────────────────────
          al=00h │ ----- KEYRUS тест на присутсвие.
                 │   Output: ax = 0AAAAh; bh,bl - version
                 │           cx = 'KR' (for Keyrus)
                 │           dx = segment in memory
          al=01h │ ----- Получить состояние KEYRUS
                 │   Output: bl = Status byte
          al=02h │ ----- Установить состояние KEYRUS
                 │   Input : bl = Status byte
          al=03h │ ----- Погасить экран (/BLANK=ON нужен)
          al=04h │ ----- Восстановить погашенный экран.
          al=90h │ ----- Перейти в русский режим   ('Р')
          al=4ch │ ----- Перейти в латинский режим ('L')
        ─────────┴────────────────────────────────────────
 Status byte:
        ─────────┬────────────────────────────────────────
        000000xx │ Режим клавиатуры:
                 │   =00 - Русская
                 │   =01 - Латинская
                 │   =10 - Альтернативная
                 │   =11 - (reserved)
        00000x00 │ Разрешение загрузки символов
                 │   = 0 - Запретить (ПЗУ фонты)
        0000x000 │ Поддержка английской клавиатуры
                 │ (read only)
                 │   = 1 - English support
        xxxx0000 │ Internal bits (reserved)
        ─────────┴────────────────────────────────────────


                     ----------------------------
                     Раздел 8. Таблица скэнкодов.
                     ----------------------------

╓────┬────────╥────┬────────╥────┬────────╥────┬─────────╥────┬───────────╖
║  1 │ Esc    ║ 18 │ E      ║ 35 │ H      ║ 52 │ . >     ║ 69 │ NumLock   ║
║  2 │ 1 !    ║ 19 │ R      ║ 36 │ J      ║ 53 │ / ?     ║ 70 │ ScrLock   ║
║  3 │ 2 @    ║ 20 │ T      ║ 37 │ K      ║ 54 │ Shft(R )║ 71 │ Home [7]  ║
║  4 │ 3 #    ║ 21 │ Y      ║ 38 │ L      ║ 55 │ * PrtSc ║ 72 │ Up   [8]  ║
║  5 │ 4 $    ║ 22 │ U      ║ 39 │ ; :    ║ 56 │ Alt     ║ 73 │ PgUp [9]  ║
║  6 │ 5 %    ║ 23 │ I      ║ 40 │ " '    ║ 57 │ Space   ║ 74 │ Gray-     ║
║  7 │ 6 ^    ║ 24 │ O      ║ 41 │ ` ~    ║ 58 │ CapsLock║ 75 │ Left [4]  ║
║  8 │ 7 &    ║ 25 │ P      ║ 42 │ Shft(L)║ 59 │ F1      ║ 76 │ Cntr [5]  ║
║  9 │ 8 *    ║ 26 │ [ {    ║ 43 │ \ |    ║ 60 │ F2      ║ 77 │ Right[6]  ║
║ 10 │ 9 (    ║ 27 │ ] }    ║ 44 │ Z      ║ 61 │ F3      ║ 78 │ Gray+     ║
║ 11 │ 0 )    ║ 28 │ Enter  ║ 45 │ X      ║ 62 │ F4      ║ 79 │ End  [1]  ║
║ 12 │ - _    ║ 29 │ Ctrl   ║ 46 │ C      ║ 63 │ F5      ║ 80 │ Down [2]  ║
║ 13 │ + =    ║ 30 │ A      ║ 47 │ V      ║ 64 │ F6      ║ 81 │ PgDn [3]  ║
║ 14 │ bksp   ║ 31 │ S      ║ 48 │ B      ║ 65 │ F7      ║ 82 │ Ins  [0]  ║
║ 15 │ Tab    ║ 32 │ D      ║ 49 │ N      ║ 66 │ F8      ║ 83 │ Del  [.]  ║
║ 16 │ Q      ║ 33 │ F      ║ 50 │ M      ║ 67 │ F9      ║    │           ║
║ 17 │ W      ║ 34 │ G      ║ 51 │ , <    ║ 68 │ F10     ║    │           ║
╟────┼────────╫────┼────────╫────┼────────╫────┼─────────╫────┼───────────╢
║ 87 │ F11    ║ 71p│ Home   ║ 72p│ Up     ║ 82p│ Insert  ║ 28p│ GrayEnter ║
║ 88 │ F12    ║ 79p│ End    ║ 80p│ Down   ║ 83p│ Delete  ║ 84 │ Alt+PrtScr║
║ 56p│ Alt(R) ║ 73p│ PgUp   ║ 75p│ Left   ║ 53p│ Gray/   ║111p│ Macro     ║
║ 29p│ Ctrl(R)║ 81p│ PgDn   ║ 77p│ Right  ║ 55p│ SysReq  ║    │           ║
╙────┴────────╨────┴────────╨────┴────────╨────┴─────────╨────┴───────────╜


                         ---------------------
                         Раздел 9. Примечания.
                         ---------------------


        Что нужно сделать, чтобы программа Norton Commander
                   "понимала" русскую букву "р".
        ---------------------------------------------------

Для Norton Commander ( вер. 2.0 ) -
  С помощью утилиты  NU или DiskEdit скорректируйте программу NC.EXE:
  по смещению  9CBD замените байт 0e0h('р') на 00

Для Norton Commander ( вер. 3.0 ) -
  С помощью утилиты NU или DiskEdit скорректируйте программу NCMAIN.EXE:
  по смещению  1E02 замените байт 0e0h('р') на 00.

   Если и после этого проблема не будет решена (что маловероятно),
   то параметром /keys укажите файл клавиатуры, в котором вместо русской
   буквы 'р' будет латинская буква 'p' (воспользуйтесь редактором клави-
атур).

</pre>
            </p>
        </div>
    </body>
</html>
